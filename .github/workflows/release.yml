# Deploy release to website and Zenodo when a tag is pushed.

name: release

on:
  push:
    tags: ["*"]

jobs:
  release:
    runs-on: ubuntu-latest
    steps:

      - name: Check out repo
        uses: actions/checkout@v4

      - name: Create a Zenodo release
        uses: softprops/action-gh-release@v2
        with:
          body: 'This is a release to archive data with Zenodo.'
          files: |
            data/README.md
            data/csv
            data/json

      - name: Deploy to Azure Web App
        id:   deploy-to-webapp
        uses: azure/webapps-deploy@v2
        with:
          app-name:        nisinoon
          slot-name:       Production
          package:         .
          publish-profile: ${{ secrets.AZUREAPPSERVICE_PUBLISHPROFILE_C789F3DAFFFF45EA89AA17889914203C }}