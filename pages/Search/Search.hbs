<main class=search-page id=main>

  <search>
    <form method=get>
      <label for=search-box>Quick Search</label>
      <div class=search-controls>
        <input
          autocomplete=on
          autocorrect=off
          class=text-box
          enterkeyhint=search
          id=search-box
          inputmode=search
          name=q
          placeholder='e.g. “atimw-” or “dog”'
          spellcheck=false
          type=search
        >
        <button class=button type=submit>Search</button>
      </div>
      <span class=help-text>Searches components (in any orthography) and definitions for exact matches anywhere within the string. Leave blank and press "Search" to display all components.</span>
    </form>
  </search>

  {{#unless (isTruthy components) }}
    <dl class=stats>
      <dt># of languages</dt>
      <dd>{{ numLanguages }}</dd>
      <dt># of components</dt>
      <dd>{{ numComponents }}</dd>
    </dl>
  {{else}}
    {{#unless components}}
      <p class=no-results>No results found.</p>
    {{else}}
      <div class=results-wrapper>
        <table class=results>
          <thead>
            <tr>
              <th></th>
              <th></th>
              <th></th>
              <th></th>
              <th class='bb c' colspan=3>Sources</th>
            </tr>
            <tr>
              <th>Language</th>
              <th>Form</th>
              <th>UR</th>
              <th>Definition</th>
              <th>Forms</th>
              <th>URs</th>
              <th>Glosses</th>
            </tr>
          </thead>
          <tbody>
            {{#each components as |component| }}
              <tr>
                <td class=language>{{ displayLanguage }}</td>
                <td class=form><a class=link href='/components/{{ id }}'>{{ form }}</a></td>
                <td class=UR><a class=link href='/components/{{ id }}'>{{#if UR}}/{{ UR }}/{{/if}}</a></td>
                <td class=definition>{{#if definition }}‘{{ definition }}’{{else}}&#8212;{{/if}}</td>
                <td class=source-forms>
                  <ul>
                    {{#each tokens as |token| }}
                      <li>{{ form }}</li>
                    {{/each}}
                  </ul>
                </td>
                <td class=source-URs>
                  <ul>
                    {{#each tokens as |token| }}
                      <li>{{#if UR }}/{{ UR }}/{{/if}}</li>
                    {{/each}}
                  </ul>
                </td>
                <td class=source-glosses>
                  <ul>
                    {{#each tokens as |token| }}
                      <li>{{#if gloss }}‘{{ gloss }}’{{else}}&#8212;{{/if}}</li>
                    {{/each}}
                  </ul>
                </td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    {{/unless}}
  {{/unless}}

</main>

